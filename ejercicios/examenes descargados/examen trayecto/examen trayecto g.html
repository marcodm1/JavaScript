<!DOCTYPE html>
<html>
 <head>
   <meta content="text/html; charset=UTF-8" http-equiv="content-type">
   <title>Tablas</title>
   <script type="text/javascript">
	function Libro (t, a, p) {
		this.titulo  = t;
		this.autor   = a;
	   this.paginas = p;
	}
	function Totales (a, p) {
		this.autor   = a;
		this.paginas = p;
	}
   </script>
 </head>
 <body>
   <script type="text/javascript">
// Variables
var libros = new Array();
var mas = true;
var i = 0;
var j = 0;

// Recogida de datos
do {
      i = libros.length;
      libros[i] = new Libro();
      libros[i].titulo = prompt("Titulo del libro", "");
      libros[i].autor = prompt("Autor", "");
      libros[i].paginas = parseInt(prompt("Número de páginas", 0));
      mas = confirm("Más libros ?");
} while (mas);

// Total páginas por autor
var paginas = new Array();
for (i=0; i < libros.length; i++) {
    for (j=0; j < paginas.length; j++) {
        if (libros[i].autor == paginas[j].autor) {
           paginas[j].paginas += libros[i].paginas;
           break;
        }
    }
    if (j == paginas.length) {
       paginas[j] = new Totales();
       paginas[j].autor = libros[i].autor;
       paginas[j].paginas = libros[i].paginas;
    }
}

// Ordenar descendentemente
paginas.sort(function (a, b) {return(b.paginas - a.paginas);});

// Mostrar datos
for (i=0; i < paginas.length; i++) {
    document.write(paginas[i].autor + " - " + paginas[i].paginas + "<br>");
}
   </script>
 </body>
</html>
